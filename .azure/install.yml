steps:
- task: DotNetCoreInstaller@0
  displayName: Installing .net core sdk 2.2.100
  inputs:
    version: '2.2.100'
- script: dotnet help
  displayName: Trigger first run experience cross-platform style

- "${{ if ne('$(Agent.OS)', 'Windows_NT') }}":
  - script: curl -sSL https://dot.net/v1/dotnet-install.sh | bash /dev/stdin -channel 1.1
    displayName: Installing .net core sdk 1.1 nix-style

  - script: ~/.dotnet/dotnet help
    displayName: Trigger first run experience nix-style

- "${{ if eq('$(Agent.OS)', 'Windows_NT') }}":
  - task: PowerShell@2
    displayName: Installing .net core sdk 1.1 ps-style
    inputs:
      targetType: inline
      script: >
          "[Net.ServicePointManager]::SecurityProtocol = [Net.SecurityProtocolType]::Tls12;
          &([scriptblock]::Create((Invoke-WebRequest -useb 'https://dot.net/v1/dotnet-install.ps1'))) -channel 1.1"
  - powershell: ~/.dotnet/dotnet help
    displayName: Trigger first run experience ps-style
