steps:
- task: DotNetCoreInstaller@0
  displayName: Installing .net core sdk 2.2.100
  inputs:
    version: '2.2.100'
- script: dotnet help
  displayName: Trigger first run experience by running arbitrary cmd to populate local package cache

- ${{ if ne(variables.Agent.OS, 'Windows_NT') }}:
  - script: curl -sSL https://dot.net/v1/dotnet-install.sh | bash /dev/stdin {0}
    displayName: Installing .net core sdk 1.1 nix-style

  - script: ~/.dotnet/dotnet help
    displayName: Trigger first run experience nix-style

- ${{ if eq(variables.Agent.OS, 'Windows_NT') }}:
  - powershell: >
      "[Net.ServicePointManager]::SecurityProtocol = [Net.SecurityProtocolType]::Tls12;
      &([scriptblock]::Create((Invoke-WebRequest -useb 'https://dot.net/v1/dotnet-install.ps1')))"
    displayName: Installing .net core sdk 1.1 ps-style

  - powershell: ~/.dotnet/dotnet help
    displayName: Trigger first run experience ps-style
