steps:

- script: curl -sSL https://dot.net/v1/dotnet-install.sh | bash /dev/stdin -channel 1.1
  condition: "${{ if ne('$(Agent.OS)', 'Windows_NT') }}"
  displayName: Installing .net core sdk 1.1 nix-style

- script: ~/.dotnet/dotnet help
  condition: "${{ if ne('$(Agent.OS)', 'Windows_NT') }}"
  displayName: Trigger first run experience nix-style

- task: PowerShell@2
  condition: "${{ if eq('$(Agent.OS)', 'Windows_NT') }}"
  displayName: Installing .net core sdk 1.1 ps-style
  inputs:
    targetType: inline
    script: >
        "[Net.ServicePointManager]::SecurityProtocol = [Net.SecurityProtocolType]::Tls12;
        &([scriptblock]::Create((Invoke-WebRequest -useb 'https://dot.net/v1/dotnet-install.ps1'))) -channel 1.1"
- powershell: ~/.dotnet/dotnet help
  condition: "${{ if eq('$(Agent.OS)', 'Windows_NT') }}"
  displayName: Trigger first run experience ps-style
